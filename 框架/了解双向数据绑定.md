## 起始

目前接触的框架 ` Angularjs ` 是双向数据绑定(数据变更响应界面,界面操作反应到数据)( ` Angular ` 双向数据流和单向数据流都支持了);  ` Vuejs ` 双重概念,在组件内部是双向数据绑定,在不同组件之间传递是强制单向数据流;  ` ReactJs ` 是单向数据流.

思考:

- 什么是数据双向绑定
- 单向和双向的适用场景

## 2种实现方式示例

双向绑定基于用户的操作建立 `UI <=> Data` 之间的关系; 例如监听`DOM`的`change` `keyup` `keypress`事件;

#### 手动绑定

```javascript

// 获取元素
var elems = [document.querySelector('')]

// 获取指令
var modelDOMs = this.elem.querySelectorAll('[v-model]')
var textDOMs = this.elem.querySelectorAll('[v-text]')

// 更改数据
function setState(key, value){
    data[key] = value;
}

// 事件监听
elems[type='text'].addEventListener('keyup', function(e){
    setState('value', e.target.value);
}, false);

```

#### 数据劫持

```javascript
<input type="text" v-model="text">
<p v-text="text"></p>

// 获取元素
var elems = [document.querySelector('')]

// 获取指令
var modelDOMs = this.elem.querySelectorAll('[v-model]')
var textDOMs = this.elem.querySelectorAll('[v-text]')

// 数据劫持
Object.defineProperty(obj, key, {
     enumerable: true,
     configurable: true,
     get: function() {
         return _value;
     },
     set: function(newVal) {
         if (_value !== newVal) {
             _value = newVal;
             _this.bindText();
         }
     },
 })
 
 // 事件监听
modelDOMs[i].addEventListener('keyup', function(e) {
    e = e || window.event;

    _this.data[textDOMs] = e.target.value;
}, false);

```

#### 进阶

## 框架OR库数据相应示例代码

#### `vuejs`

```javascript

// template
<div id="app">
    <p>{{ message }}</p>
    <input v-model="message" />
</div>

// script
var app = new Vue({
    el: '#app',
    data: {
        message: 'Hello Vue!'
    }
})
```

#### `angularjs`

```javascript

// demo.tpl.html
<input type="text" data-ng-model="message" />
<h3>{{ message }}</h3>

// demo.ctrl.js
demoApp.controller( DemoController, function ( $scope ) {
    $scope.message = “Hello Angular!”;
})
```

#### `reactjs`

```javascript

clsss Demo extends React.PureComponent {
    state = {
        message: 'Hello React!'
    }
    onChange = (e) => {
        this.setState({
            message: e.target.value,
        });
    }
    render() {
        return(
           <div>
               <p>{{ message }}</p>
               <input onChange={this.onChange} />
           </div> 
        )
    }
}

```

## 参考

[MDN Object.defineProperty](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)   

[how-to-implement-dom-data-binding-in-javascript](https://stackoverflow.com/questions/16483560/how-to-implement-dom-data-binding-in-javascript)   

[Easy Two-Way Data Binding in JavaScript](http://www.lucaongaro.eu/blog/2012/12/02/easy-two-way-data-binding-in-javascript/)   

[剖析vue实现原理，自己动手实现mvvm](https://github.com/DMQ/mvvm)   

[javascript实现数据双向绑定的三种方式](http://jixianqianduan.com/frontend-javascript/2015/11/29/js-data-two-ways-binding.html)   

[JavaScript数据双向绑定的简单演示](http://div.io/topic/1645)

[Angular沉思录（一）数据绑定 #10](https://github.com/xufei/blog/issues/10)   

[The Magic of AngularJS Two-Way Binding](http://moduscreate.com/the-magic-of-angular-js-two-way-binding/)   

[e.g. 1 数据劫持](https://jsfiddle.net/evan_g/s6vrv3gz/1/)   

[e.g. 2 手动绑定](https://jsfiddle.net/evan_g/LguLoe0s/)
